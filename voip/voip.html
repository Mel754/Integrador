<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulaci√≥n VoIP</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Simulaci√≥n de Funcionalidades VoIP</h1>
    <p>Este simulador muestra todas las funcionalidades solicitadas en las tareas de VoIP.</p>

    <!-- TAREA 1: Asignar contrase√±as seguras -->
    <section>
      <h2>Asignar contrase√±as seguras a extensiones</h2>
      <form id="passwordForm">
        <input type="text" id="extension" placeholder="N√∫mero de extensi√≥n" required>
        <input type="password" id="password" placeholder="Contrase√±a segura" required>
        <button type="submit">Asignar</button>
      </form>
      <p id="passwordMsg"></p>
    </section>

    <!-- TAREA 2: Restricci√≥n de llamadas internacionales -->
    <section>
      <h2>Restringir llamadas internacionales</h2>
      <input type="text" id="numeroLlamada" placeholder="N√∫mero a marcar">
      <button onclick="restringirLlamada()">Probar llamada</button>
      <p id="restriccionMsg"></p>
    </section>

    <!-- TAREA 3: Bloqueo de intentos fallidos -->
    <section>
      <h2>Bloquear intentos fallidos de autenticaci√≥n</h2>
      <input type="text" id="usuarioLogin" placeholder="Usuario">
      <input type="password" id="claveLogin" placeholder="Contrase√±a">
      <button onclick="login()">Iniciar sesi√≥n</button>
      <p id="loginMsg"></p>
    </section>

    <!-- US-80.01 Configurar troncales -->
    <section>
      <h2>US-80.01 Configurar troncales de VoIP seguras</h2>
      <form id="troncalesForm">
        <input type="text" placeholder="IP del servidor" required>
        <input type="text" placeholder="Puerto (ej: 5060)" required>
        <button type="submit">Configurar</button>
      </form>
      <p id="troncalesMsg"></p>
    </section>

    <!-- US-80.02 Validar autenticaci√≥n -->
    <section>
      <h2>US-80.02 Validar autenticaci√≥n entre sedes</h2>
      <button onclick="validarAuth()">Validar autenticaci√≥n</button>
      <p id="authMsg"></p>
    </section>

    <!-- US-80.03 Probar llamadas -->
    <section>
      <h2>US-80.03 Probar llamadas con asociados externos</h2>
      <input type="text" id="numeroDestino" placeholder="N√∫mero del asociado">
      <button onclick="probarLlamada()">Llamar</button>
      <p id="llamadaMsg"></p>
    </section>

    <!-- US-80.04 Activar cifrado -->
    <section>
      <h2>US-80.04 Activar cifrado de extremo a extremo</h2>
      <button onclick="activarCifrado()">Activar cifrado</button>
      <p id="cifradoMsg"></p>
    </section>

    <!-- US-80.05 Registrar llamadas -->
    <section>
      <h2>US-80.05 Registrar llamadas externas en logs</h2>
      <button onclick="registrarLlamada()">Registrar √∫ltima llamada</button>
      <ul id="logs"></ul>
    </section>
  </div>

  <script>
    // --- TAREA 1 ---
    document.getElementById("passwordForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const ext = document.getElementById("extension").value;
      document.getElementById("passwordMsg").innerText = "Contrase√±a asignada correctamente a la extensi√≥n " + ext + " ‚úÖ";
    });

    // --- TAREA 2 ---
    function restringirLlamada() {
      const numero = document.getElementById("numeroLlamada").value;
      if (numero.startsWith("+")) {
        document.getElementById("restriccionMsg").innerText = "Llamada internacional bloqueada ‚ùå";
      } else {
        document.getElementById("restriccionMsg").innerText = "Llamada permitida ‚úÖ";
      }
    }

    // --- TAREA 3 ---
    let intentosFallidos = 0;
    function login() {
      const usuario = document.getElementById("usuarioLogin").value;
      const clave = document.getElementById("claveLogin").value;

      if (usuario === "admin" && clave === "1234") {
        document.getElementById("loginMsg").innerText = "Acceso concedido ‚úÖ";
        intentosFallidos = 0;
      } else {
        intentosFallidos++;
        if (intentosFallidos >= 3) {
          document.getElementById("loginMsg").innerText = "Usuario bloqueado por intentos fallidos üö´";
        } else {
          document.getElementById("loginMsg").innerText = "Credenciales incorrectas. Intento " + intentosFallidos;
        }
      }
    }

    // --- US-80.01 ---
    document.getElementById("troncalesForm").addEventListener("submit", function(e) {
      e.preventDefault();
      document.getElementById("troncalesMsg").innerText = "Troncal configurada correctamente ‚úÖ";
    });

    // --- US-80.02 ---
    function validarAuth() {
      document.getElementById("authMsg").innerText = "Autenticaci√≥n entre sedes validada correctamente üîê";
    }

    // --- US-80.03 ---
    function probarLlamada() {
      const numero = document.getElementById("numeroDestino").value;
      if (numero.trim() === "") {
        document.getElementById("llamadaMsg").innerText = "Por favor ingresa un n√∫mero v√°lido.";
      } else {
        document.getElementById("llamadaMsg").innerText = "Llamando a " + numero + " ... üìû";
      }
    }

    // --- US-80.04 ---
    function activarCifrado() {
      document.getElementById("cifradoMsg").innerText = "Cifrado de extremo a extremo activado üîí";
    }

    // --- US-80.05 ---
    function registrarLlamada() {
      const numero = document.getElementById("numeroDestino").value || "N√∫mero desconocido";
      const logs = document.getElementById("logs");
      const li = document.createElement("li");
      li.textContent = "Llamada registrada a: " + numero + " (" + new Date().toLocaleString() + ")";
      logs.appendChild(li);
    }
  </script>
</body>
</html>