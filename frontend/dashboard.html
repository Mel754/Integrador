<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J&C Technology</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        body {
            display: flex;
            background-color: #dde1ec;
            height: 100vh;
        }
        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: #4a5d9a;
            color: white;
            padding: 25px;
        }
        .sidebar h2 {
            font-size: 18px;
            margin-bottom: 30px;
        }
        .sidebar a {
            display: block;
            color: white;
            text-decoration: none;
            padding: 10px 0;
            border-radius: 5px;
            margin-bottom: 5px;
        }
        .sidebar a:hover, .sidebar a.active {
            background-color: #2c3a70;
        }
        /* Main content */
        .main {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        .main h1 {
            margin-bottom: 20px;
        }
        /* Cards */
        .cards {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }
        .card {
            background-color: #f0f2f7;
            flex: 1;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .card h2 {
            font-size: 24px;
            margin-bottom: 5px;
        }
        .card p {
            color: #555;
        }
        h2 {
            margin-bottom: 10px; 
        }
        /* Table */
        .table-container {
            max-height: 250px; 
            overflow-y: auto;  
            border: 1px solid #ccc; 
            border-radius: 8px;
            margin: 10px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        th, td {
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #b0b3b8;
            position: sticky; 
            top: 0;
            z-index: 1;
        }

        tr:nth-child(even) {
            background-color: #f0f0f0;
        }
        /* Activity & Quick Access */
        .section {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }
        .activity, .quick-access {
            flex: 1;
            background-color: #e6e9f0; 
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        /* Activity Items Interactivo */
        .activity-item {
            background-color: #f0f2f7;
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 12px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .activity-item:hover {
            background-color: #d0d4e0;
        }

        .activity-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .activity-text {
            font-weight: 500;
        }

        .activity-time {
            color: #888;
            font-size: 12px;
        }

        .activity-details {
            font-size: 12px;
            color: #4a5d9a;
            margin-top: 5px;
        }

        /* Quick Access */
        .quick-access button {
            display: block;
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: none;
            border-radius: 5px;
            background-color: #4a5d9a;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .quick-access button:hover {
            background-color: #2c3a70;
        }
        .form-proyecto {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        .form-box {
            flex: 1;
            background: #f0f2f7;
            padding: 15px;
            border-radius: 10px;
        }
        .form-box input, .form-box textarea {
            width: 100%;
            padding: 8px;
            margin: 6px 0;
            border-radius: 6px;
            border: 1px solid #ccc;
        }
        /* ===== ESTILOS NUEVOS ===== */
        .filtros {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .filtros button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 10px;
            background-color: #4a5d9a;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .filtros button:hover {
            background-color: #2c3a70;
        }

        .buscador {
            margin-bottom: 15px;
        }
        .buscador input {
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #ccc;
        }
        /* Progreso como l√≠nea */
        .progress-line {
            width: 100%;
            background-color: #d6d6d6;
            height: 8px;
            border-radius: 5px;
            overflow: hidden;
        }
        .progress-line span {
            display: block;
            height: 100%;
            background-color: #1e3a8a;
            border-radius: 5px;
        }

        .filtros-btn {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 10px;
            background-color: #4a5d9a;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
            margin-top: 8px;
        }

        .filtros-btn:hover {
            background-color: #2c3a70;
        }

        /* Estilos para el perfil */
        .perfil-header {
            display: flex;
            align-items: center;
            background-color: #f0f2f7;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            gap: 20px;
        }
        .perfil-avatar {
            width: 80px;
            height: 80px;
            background-color: #4a5d9a;
            border-radius: 50%;
            flex-shrink: 0;
        }
        .perfil-info h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 5px;
        }
        .perfil-info p {
            color: #666;
            margin-bottom: 3px;
        }
        .perfil-section {
            background-color: #f0f2f7;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .perfil-section h3 {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }

        .perfil-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-row {
            display: flex;
            gap: 20px;
        }

        .form-field {
            flex: 1;
            position: relative;
        }

        .form-field label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .form-field input, .form-field select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #e9ecef;
            color: #666;
        }

        .edit-btn {
            position: absolute;
            right: 8px;
            top: 28px;
            background: none;
            border: none;
            color: #4a5d9a;
            font-size: 12px;
            cursor: pointer;
            text-decoration: underline;
        }

        .edit-btn:hover {
            color: #2c3a70;
        }

        .security-btn, .btn-agregar {
            background-color: #4a5d9a;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .security-btn:hover, .btn-agregar:hover {
            background-color: #2c3a70;
        }

        .stats-grid {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .stat-card {
            flex: 1;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .stat-card h4 {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            font-weight: normal;
        }

        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #333;
        }
        .modal {
    display: none;
    position: fixed;
    top: 0; 
    left: 0;
    width: 100%; 
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background-color: #f0f2f7;
    padding: 20px;
    border-radius: 10px;
    width: 400px;
    max-width: 90%;
    position: relative;
}

.cerrar {
    float: right;
    font-size: 20px;
    cursor: pointer;
}


.modal-content form {
  display: flex;
  flex-direction: column;
}

.modal-content input,
.modal-content textarea {
  margin-bottom: 10px;
  padding: 8px;
  border-radius: 8px;
  border: 1px solid #ccc;
}
.modal-content button {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 10px;
  border-radius: 8px;
  cursor: pointer;
}
.modal-content button:hover {
  background-color: #0056b3;
}

.modal-content {
    background-color: #f0f2f7;
    padding: 20px;
    border-radius: 10px;
    width: 400px;
    max-width: 90%;
    position: relative;
}
.close {
    position: absolute;
    right: 15px;
    top: 10px;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    color: #4a5d9a;
}
.close:hover {
    color: #2c3a70;
}

.servicio-card {
    background-color: #ffffff;
    border-radius: 10px;
    padding: 15px 20px;
    margin-bottom: 15px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    transition: transform 0.3s, box-shadow 0.3s;
}

.servicio-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

.servicio-card h3 {
    color: #4a5d9a;
    margin-bottom: 8px;
}

.servicio-card p {
    color: #555;
    font-size: 14px;
    line-height: 1.4;
}

/* Botones de servicios */
.servicio-card button {
    background-color: #4a5d9a;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s;
    margin-top: 10px;
}

.servicio-card button:hover {
    background-color: #2c3a70;
}
 /* Formulario para agregar hitos */
        .form-hito {
            background-color: #f0f2f7;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        /* Diagrama de Gantt */
        .gantt-container {
            margin-top: 30px;
            overflow-x: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .gantt-chart {
            min-width: 800px;
            background: white;
        }

        .gantt-header {
            display: flex;
            border-bottom: 2px solid #4a5d9a;
            background-color: #f8f9fa;
        }

        .gantt-task-header {
            width: 200px;
            padding: 15px;
            font-weight: bold;
            text-align: center;
            border-right: 1px solid #ddd;
            background-color: #4a5d9a;
            color: white;
        }

        .gantt-dates-header {
            flex: 1;
            display: flex;
            background-color: #4a5d9a;
        }

        .gantt-date {
            flex: 1;
            padding: 15px 5px;
            text-align: center;
            border-right: 1px solid #ddd;
            color: white;
            font-size: 12px;
            min-width: 60px;
        }

        .gantt-row {
            display: flex;
            border-bottom: 1px solid #eee;
            min-height: 50px;
            align-items: center;
        }

        .gantt-row:nth-child(even) {
            background-color: #f8f9fa;
        }
         .gantt-task-name {
    width: 200px;
    padding: 15px;
    border-right: 1px solid #ddd;
    font-weight: 500;
    background-color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.gantt-actions {
    display: flex;
    gap: 5px;
}

.btn-edit, .btn-delete {
    padding: 4px 8px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 11px;
    font-weight: bold;
}

.btn-edit {
    background-color: #ffc107;
    color: #000;
}

.btn-edit:hover {
    background-color: #e0a800;
}

.btn-delete {
    background-color: #dc3545;
    color: white;
}

.btn-delete:hover {
    background-color: #c82333;
}
.gantt-timeline {
    flex: 1;
    display: flex;
    position: relative;
    height: 50px;
}

.gantt-bar {
    height: 25px;
    background-color: #dc3545;
    border-radius: 4px;
    margin: 12.5px 0;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 11px;
    font-weight: bold;
}

.gantt-grid-line {
    position: absolute;
    top: 0;
    bottom: 0;
    border-right: 1px solid #eee;
    z-index: 1;
}

.estado-completado { background-color: #28a745; }
.estado-progreso { background-color: #ffc107; }
.estado-pendiente { background-color: #6c757d; }
.estado-retrasado { background-color: #dc3545; }
</style>
</head>
<body>
    <div class="sidebar">
        <h2>J&C Technology</h2>
        <a href="#" class="active" onclick="mostrarSeccion('inicio')">Inicio</a>
        <a href="#" onclick="mostrarSeccion('proyectos')">Proyectos</a>
        <a href="#" onclick="mostrarSeccion('servicios')">Servicios</a>
        <a href="#" onclick="mostrarSeccion('perfil')">Perfil</a>
    </div>
    <div class="main">
        <!-- Inicio -->
        <div id="inicio" class="contenido">
            <h1>Panel de control</h1>
            <div class="cards">
                <div class="card">
                    <h2>19</h2><p>Proyectos Activos</p>
                </div>
                <div class="card">
                    <h2>155</h2><p>Usuarios Totales</p>
                </div>
                <div class="card">
                    <h2>5</h2><p>Servicios</p>
                </div>
            </div>
            <h2>Gesti√≥n de usuarios</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr><th>Nombre</th><th>Rol</th><th>Estado</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Harry Styles</td><td>Usuario</td><td>Activo</td></tr>
                        <tr><td>Samuel Castro</td><td>Administrador</td><td>Activo</td></tr>
                        <tr><td>Emmanuel Tamayo</td><td>Administrador</td><td>Activo</td></tr>
                        <tr><td>Niall Horan</td><td>Usuario</td><td>Inactivo</td></tr>
                        <tr><td>Louis Tomlinson</td><td>Usuario</td><td>Activo</td></tr>
                        <tr><td>Ariana Grande</td><td>Usuario</td><td>Inactivo</td></tr>
                        <tr><td>Melany Mej√≠a</td><td>Usuario</td><td>Activo</td></tr>
                        <tr><td>Sabrina Carpenter</td><td>Usuario</td><td>Activo</td></tr>
                    </tbody>
                </table>
            </div>
            <div class="section">
                <div class="activity">
                    <h2>Actividad reciente</h2>
                    <div class="activity-item" onclick="mostrarDetalles('Nuevo proyecto creado')">
                        <div class="activity-main">
                            <span class="activity-text">Nuevo proyecto creado</span><span class="activity-time">Hace 20 min</span>
                        </div>
                        <div class="activity-details">Ver detalles</div>
                    </div>
                    <div class="activity-item" onclick="mostrarDetalles('Nuevo usuario registrado')">
                        <div class="activity-main">
                            <span class="activity-text">Nuevo usuario registrado</span><span class="activity-time">Hace 50 min</span>
                        </div>
                        <div class="activity-details">Ver detalles</div>
                    </div>
                    <div class="activity-item" onclick="mostrarDetalles('Servicio reservado')">
                        <div class="activity-main">
                            <span class="activity-text">Nuevo servicio reservado</span><span class="activity-time">Hace 1 hora</span>
                        </div>
                        <div class="activity-details">Ver detalles</div>
                    </div>
                </div>
                <div class="quick-access">
                    <h2>Acceso r√°pido</h2>
                    <button onclick="mostrarSeccion('proyectos')">Ver proyectos</button>
                    <button onclick="abrirModalProyecto()">Crear proyecto</button>
                </div>
            </div>
        </div>
        
        <!--Proyectos-->
        <div id="proyectos" class="contenido" style="display:none;">
            <h1>Gesti√≥n de Proyectos</h1>
            <div class="filtros">
                <button>Todos</button><button>Activos</button><button>Pendientes</button>
            </div>
            <div class="buscador">
                <input type="text" placeholder="Buscar por nombre, descripci√≥n o miembro del equipo">
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr><th>Nombre del proyecto</th><th>Estado</th><th>Miembros del equipo</th><th>Fecha Estimada</th><th>Progreso</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Proyecto A</td><td>Pendiente</td><td>Harry, Louis</td><td>10/10/2025</td>
                            <td><div class="progress-line"><span style="width:60%"></span></div></td>
                        </tr>
                        <tr>
                            <td>Proyecto B</td><td>Activo</td><td>Zayn</td><td>15/09/2025</td>
                            <td><div class="progress-line"><span style="width:95%"></span></div></td>
                        </tr>
                        <tr>
                            <td>Proyecto C</td><td>Completo</td><td>Liam, Niall</td><td>01/08/2025</td>
                            <td><div class="progress-line"><span style="width:100%"></span></div></td>
                        </tr>
                        <tr>
                            <td>Proyecto D</td><td>Inactivo</td><td>Ariana</td><td>12/12/2025</td>
                            <td><div class="progress-line"><span style="width:0%"></span></div></td>
                        </tr>
                         <tr>
                            <td>Proyecto E</td><td>Activo</td><td>Blair</td><td>15/10/2025</td>
                            <td><div class="progress-line"><span style="width:45%"></span></div></td>
                        </tr>
                        <tr>
                            <td>Proyecto F</td><td>Inactivo</td><td>Larry</td><td>19/11/2025</td>
                            <td><div class="progress-line"><span style="width:10%"></span></div></td>
                        </tr>
                        <tr>
                            <td>Proyecto G</td><td>Completo</td><td>Sabrina</td><td>8/9/2025</td>
                            <td><div class="progress-line"><span style="width:100%"></span></div></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Formulario para nuevo proyecto -->
            <h2>Crear nuevo Proyecto:</h2>
            <div class="form-proyecto">
                <div class="form-box">
                    <h3>Informaci√≥n B√°sica</h3>
                    <label>Nombre del Proyecto</label>
                    <input type="text">
                    <label>Descripci√≥n</label>
                    <textarea></textarea>
                    <label>Fecha de inicio</label>
                    <input type="date">
                    <label>Fecha Fin estimada</label>
                    <input type="date">
                </div>
                <div class="form-box">
                    <h3>Equipo del Proyecto</h3>
                    <label>L√≠der del Proyecto</label>
                    <input type="text">
                    <label>Miembros del Equipo</label>
                    <input type="text" id="miembro">
                    <button type="button" class="filtros-btn" onclick="agregarMiembro()">+ Agregar miembro</button>
                    <ul id="lista-miembros"></ul>
                </div>
            </div>
            <hr>
            <!-- DIAGRAMA DE GANTT DENTRO DE PROYECTOS -->
            <h2>Proyecto - Diagrama de Gantt</h2>
            <div class="form-hito">
                <h3>Agregar nuevo Hito</h3>
                <form id="hitoForm">
                    <div class="form-row">
                        <div class="form-field">
                            <label for="proyecto">Proyecto asociado:</label>
                            <select id="proyecto" required>
                                <option value="">Seleccione...</option>
                                <option value="Proyecto 1">Proyecto 1</option>
                                <option value="Proyecto 2">Proyecto 2</option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label for="fechaInicio">Fecha inicio:</label>
                            <input type="date" id="fechaInicio" required>
                        </div>
                        <div class="form-field">
                            <label for="fechaFin">Fecha fin:</label>
                            <input type="date" id="fechaFin" required>        
                        </div>
                        <div class="form-field">
                            <label for="estadoHito">Estado:</label>
                            <select id="estadoHito">
                                <option value="pendiente">Pendiente</option>
                                <option value="progreso">En Progreso</option>
                                <option value="completado">Completado</option>
                                <option value="retrasado">Retrasado</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="nombreHito">Nombre del Hito:</label>
                            <input type="text" id="nombreHito" placeholder="Ej: Definir requisitos" required>
                        </div>
                    </div>
                    <button type="submit" class="btn-agregar">Agregar Hito</button>
                </form>
            </div>
            
            <div class="gantt-container">
                <div class="gantt-chart" id="ganttChart">
                    <div class="gantt-task-header">Hitos del Proyecto</div>
                    <div class="gantt-dates-header" id="datesHeader"></div>
                </div>
            </div>
            <div id="ganttBody"></div>
        </div>
        
        <!-- Servicios -->
        <div id="servicios" class="contenido" style="display:none;">
            <h1>Gesti√≥n de Servicios</h1>
            <div class="table-container">
                <table id="tablaSolicitudes">
                    <thead>
                        <tr><th>#</th><th>Tipo</th><th>Fecha</th><th>Hora</th><th>Estado</th><th>Registrado el</th></tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
            <div class="servicio-card">
                <h3>Solicitar Asesor√≠a</h3>
                <p>Selecciona fecha, hora y tema de tu asesor√≠a. Adjunta una descripci√≥n breve de tu necesidad.</p>
                <button onclick="abrirModalAsesoria()">Solicitar</button>
            </div>
            <div class="servicio-card">
                <h3>Solicitar Consultor√≠a</h3>
                <p>Adjunta documentos necesarios y genera un n√∫mero de seguimiento autom√°tico para tu solicitud.</p>
                <button onclick="abrirModalConsultoria()">Solicitar</button>
            </div>
            <div class="servicio-card">
                <h3>Ver Estado de Solicitudes</h3>
                <p>Revisa el estado actualizado de tus solicitudes: "pendiente", "en proceso" o "resuelto". Se mostrar√° la fecha de creaci√≥n y √∫ltima actualizaci√≥n.</p>
                <button onclick="abrirModalSolicitudes()">Solicitar</button>
            </div>
            <!-- Modal Solicitar Asesor√≠a -->
             <div id="modal-asesoria" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="cerrarModalAsesoria()">&times;</span>
                    <h2>Solicitar Asesor√≠a</h2>
                    <form id="formAsesoria">
                        <input type="date" id="fechaAsesoria" required>
                        <input type="time" id="horaAsesoria" required>
                        <input type="text" id="temaAsesoria" placeholder="Tema" required>
                        <textarea id="descripcionAsesoria" placeholder="Descripci√≥n" required></textarea>
                        <button type="submit">Enviar</button>
                    </form>
                </div>
            </div>
            <!-- Modal Solicitar Consultor√≠a -->
             <div id="modal-consultoria" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="cerrarModalConsultoria()">&times;</span>
                    <h2>Solicitar Consultor√≠a</h2>
                    <form id="formConsultoria">
                        <input type="date" id="fechaConsultoria" required>
                        <input type="time" id="horaConsultoria" required>
                        <input type="text" id="documentosConsultoria" placeholder="Documentos necesarios" required>
                        <button type="submit">Enviar</button>
                    </form>
                </div>
            </div>
            <!-- Modal Ver Estado de Solicitudes -->
             <div id="modal-solicitudes" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="cerrarModalSolicitudes()">&times;</span>
                    <h2>Estado de Solicitudes</h2>
                    <div id="estadoSolicitudes">
                        <p>No hay solicitudes registradas a√∫n.</p>
                    </div>
                </div>
            </div>
        </div>
                    <!-- Modal para Editar Hito -->
<div id="modal-editar-hito" class="modal">
    <div class="modal-content">
        <span class="close" onclick="cerrarModalEditarHito()">&times;</span>
        <h2>Editar Hito</h2>
        <form id="formEditarHito">
            <div class="form-row">
                <div class="form-field">
                    <label for="editProyecto">Proyecto asociado:</label>
                    <select id="editProyecto" required>
                        <option value="">Seleccione...</option>
                        <option value="Proyecto 1">Proyecto 1</option>
                        <option value="Proyecto 2">Proyecto 2</option>
                    </select>
                </div>
                <div class="form-field">
                    <label for="editFechaInicio">Fecha inicio:</label>
                    <input type="date" id="editFechaInicio" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-field">
                    <label for="editFechaFin">Fecha fin:</label>
                    <input type="date" id="editFechaFin" required>        
                </div>
                <div class="form-field">
                    <label for="editEstadoHito">Estado:</label>
                    <select id="editEstadoHito">
                        <option value="pendiente">Pendiente</option>
                        <option value="progreso">En Progreso</option>
                        <option value="completado">Completado</option>
                        <option value="retrasado">Retrasado</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-field">
                    <label for="editNombreHito">Nombre del Hito:</label>
                    <input type="text" id="editNombreHito" placeholder="Ej: Definir requisitos" required>
                </div>
            </div>
            <button type="submit" class="btn-agregar">Guardar Cambios</button>
        </form>
    </div>
</div>
        <!-- Perfil -->
        <div id="perfil" class="contenido" style="display:none;">
            <h1>Mi Perfil</h1>
            <div class="perfil-header">
                <div class="perfil-avatar"></div>
                <div class="perfil-info">
                    <h2>Timothee Chal</h2><p>timothee.chal@edu.co</p><p>Ingeniero de Sistemas</p>
                </div>
            </div>
            <div class="perfil-section">
                <h3>Informaci√≥n Personal</h3>
                <div class="perfil-form">
                    <div class="form-row">
                        <div class="form-field">
                            <label>Nombre Completo</label>
                            <input type="text" value="Timothee Chal">
                        </div>
                        <div class="form-field">
                            <label>Tel√©fono</label>
                            <input type="text" value="300 3203203">
                            <button class="edit-btn">Editar</button>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label>Correo electr√≥nico</label>
                            <input type="email" value="timothee.chal@edu.co">
                        </div>
                        <div class="form-field">
                            <label>Ubicaci√≥n</label>
                            <input type="text" value="Bucaramanga" readonly>
                        </div>
                    </div>
                    <!-- Selector de rol -->
                     <label for="roleSelect">Rol:</label>
                     <select id="roleSelect" onchange="setUserRole(this.value)">
                        <option value="usuario">Usuario</option>
                        <option value="admin">Administrador</option>
                    </select>
                    <!-- Panel que solo ver√° el admin -->
                    <div id="adminPanel" style="display:none; margin-top:12px;">
                        <h3>Panel de Administraci√≥n</h3>
                        <button onclick="activarEdicion()">Activar edici√≥n</button>
                        <button onclick="revertirCambios()">Revertir √∫ltimo cambio</button>
                        <button onclick="organizarSecciones()">Organizar secciones</button>
                    </div>
                </div>
            </div>
            <!-- Seguridad -->
            <div class="perfil-section">
                <h3>Seguridad</h3>
                <button class="security-btn" onclick="abrirModalPassword()">Cambiar contrase√±a</button>
            </div>
            <div class="perfil-section">
                <h3>Estad√≠sticas personales</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h4>Proyectos completados</h4>
                        <div class="stat-number">7</div>
                    </div>
                    <div class="stat-card">
                        <h4>Eventos asistidos</h4>
                        <div class="stat-number">13</div>
                    </div>
                    <div class="stat-card">
                        <h4>Contribuciones</h4>
                        <div class="stat-number">2</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
            <!-- ===== NUEVO: MODAL CAMBIAR CONTRASE√ëA ===== -->
             <div id="modal-pass" class="modal" style="display:none;">
                <div class="modal-content">
                    <span class="close" onclick="cerrarModalPassword()">&times;</span>
                    <h2>Cambiar Contrase√±a</h2>
                    <div class="perfil-form">
                        <div class="form-field">
                            <label>Contrase√±a actual</label>
                            <input type="password" id="current-pass">
                        </div>
                        <div class="form-field">
                            <label>Nueva contrase√±a</label>
                            <input type="password" id="new-pass">
                        </div>
                        <div class="form-field">
                            <label>Confirmar nueva contrase√±a</label>
                            <input type="password" id="confirm-pass">
                        </div>
                        <button class="security-btn" onclick="cambiarContrase√±a()">Guardar cambios</button>
                    </div>
                </div>
            </div>
            <!-- Modal para crear proyecto -->
             <div id="modalProyecto" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="cerrarModalProyecto()">&times;</span>
                    <h2>Crear Proyecto</h2>
                    <form id="formCrearProyecto">
                        <label for="nombreProyecto">Nombre del proyecto:</label>
                        <input type="text" id="nombreProyecto" name="nombreProyecto" required>
                        <label for="descripcionProyecto">Descripci√≥n:</label>
                        <textarea id="descripcionProyecto" name="descripcionProyecto" required></textarea>
                        <label for="fechaInicio">Fecha de inicio:</label>
                        <input type="date" id="fechaInicioProyecto" name="fechaInicio" required>
                        <label for="fechaFin">Fecha de finalizaci√≥n:</label>
                        <input type="date" id="fechaFinProyecto" name="fechaFin" required>
                        <button type="submit">Guardar</button>
                    </form>
                </div>
            </div>
    <script>
        /*--SCRIPT--*/
        //function
        function mostrarDetalles(texto) {
            alert("Mostrando detalles de: " + texto);
        }
        function mostrarSeccion(seccion) {
            const secciones = document.querySelectorAll('.contenido');
            secciones.forEach(s => s.style.display = 'none');
            document.getElementById(seccion).style.display = 'block';
            const links = document.querySelectorAll('.sidebar a');
            links.forEach(l => l.classList.remove('active'));
            event.target.classList.add('active');
        }
        function agregarMiembro() {
            const input = document.getElementById("miembro");
            const lista = document.getElementById("lista-miembros");
            if (input.value.trim() !== "") {
                const li = document.createElement("li");
                li.textContent = input.value;
                lista.appendChild(li);
                input.value = ""; // limpiar input
            } else {
                alert("Por favor, escribe un nombre antes de agregar.");
            }
        }
        function cambiarContrase√±a() {
            const current = document.getElementById("current-pass").value;
            const nuevo = document.getElementById("new-pass").value;
            const confirm = document.getElementById("confirm-pass").value;
            
            if (!current || !nuevo || !confirm) {
                alert("Por favor completa todos los campos.");
                return;
            }
            
            if (nuevo.length < 8) {
                alert("La nueva contrase√±a debe tener al menos 8 caracteres.");
                return;
            }
            if (!/[A-Z]/.test(nuevo)) {
                alert("La nueva contrase√±a debe contener al menos una letra may√∫scula.");
                return;
            }
            if (!/[!@#$%^&*()_+\-=[\]{};':\"\\|,.<>/?]/.test(nuevo)) {
                alert("La nueva contrase√±a debe contener al menos un car√°cter especial.");
                return;
            }
            if (nuevo !== confirm) {
                alert("La nueva contrase√±a y la confirmaci√≥n no coinciden.");
                return;
            }
            if (nuevo === current) {
                alert("No puedes reutilizar tu contrase√±a actual.");
                return;
            }
            const fechaCambio = new Date();
            console.log("Contrase√±a cambiada el: " + fechaCambio.toLocaleString());
            alert("Contrase√±a cambiada exitosamente! Se cerrar√° la sesi√≥n para aplicar los cambios.");
            // Simular cierre de sesi√≥n
            setTimeout(() => {
                location.reload();
            }, 1000);
        }
        // Generar ID autom√°tico
        function generarID() {
            const id = "PRJ-" + Math.floor(Math.random() * 1000).toString().padStart(3, "0");
            console.log("ID generado:", id);
        }
        window.onload = generarID;
        // Abrir/cerrar historial
        function mostrarHistorial() {
            document.getElementById("modal-historial").style.display = "block";
        }
        function cerrarHistorial() {
            document.getElementById("modal-historial").style.display = "none";
        }
        // Abrir/cerrar tareas
        function abrirTareas(nombreProyecto) {
            document.getElementById("modal-tareas").style.display = "block";
        }
        function cerrarTareas() {
            document.getElementById("modal-tareas").style.display = "none";
        }
        function agregarTarea() {
            const lista = document.getElementById("lista-tareas");
            const nueva = document.getElementById("nueva-tarea").value;
            if(nueva.trim() !== "") {
                const li = document.createElement("li");
                li.textContent = nueva;
                lista.appendChild(li);
                document.getElementById("nueva-tarea").value = "";
            }
        }
        function guardarProyecto(event) {
            event.preventDefault();
            alert("Proyecto guardado con ID " + document.getElementById("id-proyecto").value);
            generarID(); // genera un nuevo ID para el pr√≥ximo proyecto
        }
        function abrirModalPassword() {
            document.getElementById("modal-pass").style.display = "flex";
        }
        function cerrarModalPassword() {
            document.getElementById("modal-pass").style.display = "none";
        }
        function abrirModalProyecto() {
            document.getElementById("modalProyecto").style.display = "flex";
        }
        function cerrarModalProyecto() {
            document.getElementById("modalProyecto").style.display = "none";
        }
        document.getElementById("formCrearProyecto").addEventListener("submit", function(e){
            e.preventDefault();
            const nombre = document.getElementById("nombreProyecto").value;
            const descripcion = document.getElementById("descripcionProyecto").value;
            alert("Proyecto creado exitosamente:\n" + 
            "Nombre: " + nombre + "\n" +
            "Descripci√≥n: " + descripcion);
            document.getElementById("formCrearProyecto").reset();
            cerrarModalProyecto();
        });
        function abrirModalProyecto() {
            document.getElementById("modalProyecto").style.display = "flex";
        }
        function cerrarModalProyecto() {
            document.getElementById("modalProyecto").style.display = "none";
        }
        /*Manejo del rol*/
        let userRole = "usuario"; // valor por defecto
        function setUserRole(role) {
            localStorage.setItem("userRole", role);
            userRole = role;
            console.log("Rol seteado a:", role);
            updateUIForRole();
        }
        function getUserRole() {
            return localStorage.getItem("userRole") || "usuario";
        }
        function isAdmin() {
            return getUserRole() === "admin";
        }
        function updateUIForRole() {
            const panel = document.getElementById("adminPanel");
            if (isAdmin()) {
                if (panel) panel.style.display = "block";
                document.querySelectorAll(".editable").forEach(el => el.classList.add("admin-enabled"));
            } else {
                if (panel) panel.style.display = "none";
                document.querySelectorAll(".editable").forEach(el => el.classList.remove("admin-enabled"));
            }
        }
        let contadorSolicitudes = 1;
        const tablaSolicitudes = document.querySelector("#tablaSolicitudes tbody");
        // Referencia a la tabla
        const tabla = document.querySelector("#tablaSolicitudes tbody");
        // Abrir y cerrar modales
        function abrirModalAsesoria() { document.getElementById("modal-asesoria").style.display = "flex"; }
        function cerrarModalAsesoria() { document.getElementById("modal-asesoria").style.display = "none"; }
        function abrirModalConsultoria() { document.getElementById("modal-consultoria").style.display = "flex"; }
        function cerrarModalConsultoria() { document.getElementById("modal-consultoria").style.display = "none"; }
        function abrirModalSolicitudes() { document.getElementById("modal-solicitudes").style.display = "flex"; cargarEstadoSolicitudes(); }
        function cerrarModalSolicitudes() { document.getElementById("modal-solicitudes").style.display = "none"; }
        let contador = 1; // Contador de solicitudes
        let solicitudes = []; // Array para guardar solicitudes
        // Manejo del formulario Asesor√≠a
        document.getElementById("formAsesoria").addEventListener("submit", function(e) {
            e.preventDefault();
            const fecha = document.getElementById("fechaAsesoria").value;
            const hora = document.getElementById("horaAsesoria").value;
            const tema = document.getElementById("temaAsesoria").value;
            const descripcion = document.getElementById("descripcionAsesoria").value;
            const nuevaSolicitud = {
                id: contador++,
                tipo: "Asesor√≠a",
                fecha,
                hora,
                estado: "Pendiente",
                registradoEl: new Date().toLocaleString()
            };
            solicitudes.push(nuevaSolicitud);
            agregarFilaTabla(nuevaSolicitud);
            this.reset();
            cerrarModalAsesoria();
        });
        document.getElementById("formConsultoria").addEventListener("submit", function(e) {
            e.preventDefault();
            const fecha = document.getElementById("fechaConsultoria").value;
            const hora = document.getElementById("horaConsultoria").value;
            const documentos = document.getElementById("documentosConsultoria").value;
            const nuevaSolicitud = {
                id: contador++,
                tipo: "Consultor√≠a",fecha,hora,estado: "Pendiente",registradoEl: new Date().toLocaleString()
            };
            solicitudes.push(nuevaSolicitud);
            agregarFilaTabla(nuevaSolicitud);
            this.reset();
            cerrarModalConsultoria();
        });
        function agregarFilaTabla(solicitud) {
            const fila = document.createElement("tr");
            fila.innerHTML = `
            <td>${solicitud.id}</td>
            <td>${solicitud.tipo}</td>
            <td>${solicitud.fecha}</td>
            <td>${solicitud.hora}</td>
            <td>${solicitud.estado}</td>
            <td>${solicitud.registradoEl}</td>
            `;
            tabla.appendChild(fila);
        }
        function cargarEstadoSolicitudes() {
            const estadoDiv = document.getElementById("estadoSolicitudes");
            if (solicitudes.length === 0) {
                estadoDiv.innerHTML = "<p>No hay solicitudes registradas a√∫n.</p>";
                return;
            }
            let html = "<ul>";
                solicitudes.forEach(s => {
                    html += `<li>Solicitud #${s.id} - ${s.tipo} - ${s.estado} - Creada: ${s.registradoEl}</li>`;
                });
                html += "</ul>";
                estadoDiv.innerHTML = html;
            }
            window.addEventListener("click", function(event) {
                if (event.target === document.getElementById("modal-asesoria")) cerrarModalAsesoria();
                if (event.target === document.getElementById("modal-consultoria")) cerrarModalConsultoria();
                if (event.target === document.getElementById("modal-solicitudes")) cerrarModalSolicitudes();
            });
            let historialCambios = [];
            function activarEdicion() {
                if (!isAdmin()) return alert("No tienes permisos de administrador.");
                document.querySelectorAll(".editable").forEach(el => {
                    historialCambios.push({ id: el.id || null, contenido: el.innerHTML, fecha: new Date().toISOString() });
                    el.contentEditable = true;
                    el.classList.add("editing");
                });
                alert("Modo edici√≥n activado.");
            }
            function revertirCambios() {
                const ultimo = historialCambios.pop();
                if (!ultimo) return alert("No hay cambios para revertir.");
                if (ultimo.id) {
                    const el = document.getElementById(ultimo.id);
                    if (el) el.innerHTML = ultimo.contenido;
                }
            }
            document.addEventListener("DOMContentLoaded", () => {
                if (!localStorage.getItem("userRole")) {
                    localStorage.setItem("userRole", "usuario");
                }
                userRole = getUserRole();
                const sel = document.getElementById("roleSelect");
                if (sel) sel.value = userRole;
                updateUIForRole();
                if (typeof generarID === "function") generarID();
            });
            let hitos = [];
            let contadorHitos = 1;
            let hitoEnEdicion = null;
function renderizarGantt() {
    const ganttBody = document.getElementById('ganttBody');
    const datesHeader = document.getElementById('datesHeader');
    if (hitos.length === 0) {
        datesHeader.innerHTML = '<div class="gantt-date" style="flex: 1; text-align: center;">No hay fechas</div>';
        ganttBody.innerHTML = `
            <div class="gantt-row" style="justify-content: center; padding: 40px;">
                <span style="font-style: italic; color: #666; text-align: center;">
                    No hay hitos agregados a√∫n. Utiliza el formulario para agregar el primer hito.
                </span>
            </div>
        `;
        return;
    }
    const fechas = hitos.flatMap(h => [h.inicio, h.fin]);
    const fechaMinima = new Date(Math.min(...fechas.map(f => new Date(f))));
    const fechaMaxima = new Date(Math.max(...fechas.map(f => new Date(f))));
    
    const fechasProyecto = generarFechas(fechaMinima, fechaMaxima);
    datesHeader.innerHTML = '';
    
    fechasProyecto.forEach(fecha => {
        const dateDiv = document.createElement('div');
        dateDiv.className = 'gantt-date';
        dateDiv.textContent = formatearFecha(fecha);
        datesHeader.appendChild(dateDiv);
    });
    ganttBody.innerHTML = '';

    hitos.forEach(hito => {
        const row = document.createElement('div');
        row.className = 'gantt-row';

        const taskName = document.createElement('div');
        taskName.className = 'gantt-task-name';
        
        const nameSpan = document.createElement('span');
        nameSpan.textContent = hito.nombre;
        
        const actionsDiv = document.createElement('div');
        actionsDiv.className = 'gantt-actions';
        
        const editBtn = document.createElement('button');
        editBtn.className = 'btn-edit';
        editBtn.textContent = '‚úèÔ∏è';
        editBtn.onclick = () => editarHito(hito.id);
        
        const deleteBtn = document.createElement('button');
        deleteBtn.className = 'btn-delete';
        deleteBtn.textContent = 'üóëÔ∏è';
        deleteBtn.onclick = () => eliminarHito(hito.id);
        
        actionsDiv.appendChild(editBtn);
        actionsDiv.appendChild(deleteBtn);
        
        taskName.appendChild(nameSpan);
        taskName.appendChild(actionsDiv);

        const timeline = document.createElement('div');
        timeline.className = 'gantt-timeline';

        fechasProyecto.forEach((fecha, index) => {
            const gridLine = document.createElement('div');
            gridLine.className = 'gantt-grid-line';
            gridLine.style.left = `${(index / (fechasProyecto.length - 1)) * 100}%`;
            timeline.appendChild(gridLine);
        });

        const posicion = calcularPosicion(hito.inicio, hito.fin, fechaMinima, fechaMaxima);
        const bar = document.createElement('div');
        bar.className = `gantt-bar estado-${hito.estado}`;
        bar.style.left = `${posicion.left}%`;
        bar.style.width = `${posicion.width}%`;
        
        const duracion = Math.ceil((new Date(hito.fin) - new Date(hito.inicio)) / (1000 * 60 * 60 * 24)) + 1;
        bar.textContent = `${duracion}d`;

        timeline.appendChild(bar);

        row.appendChild(taskName);
        row.appendChild(timeline);
        ganttBody.appendChild(row);
    });
}
// Funci√≥n para editar un hito
function editarHito(id) {
    const hito = hitos.find(h => h.id === id);
    if (!hito) {
        alert('Hito no encontrado');
        return;
    }
    hitoEnEdicion = id;
    document.getElementById('editNombreHito').value = hito.nombre;
    document.getElementById('editProyecto').value = hito.proyecto || 'Proyecto 1';
    document.getElementById('editFechaInicio').value = hito.inicio;
    document.getElementById('editFechaFin').value = hito.fin;
    document.getElementById('editEstadoHito').value = hito.estado;
    document.getElementById('modal-editar-hito').style.display = 'flex';
}

// Funci√≥n para eliminar un hito
function eliminarHito(id) {
    const hito = hitos.find(h => h.id === id);
    if (!hito) {
        alert('Hito no encontrado');
        return;
    }

    if (confirm(`¬øEst√°s seguro de que quieres eliminar el hito "${hito.nombre}"?`)) {
        hitos = hitos.filter(h => h.id !== id);
        renderizarGantt();
        alert('Hito eliminado exitosamente');
    }
}

function cerrarModalEditarHito() {
    document.getElementById('modal-editar-hito').style.display = 'none';
    hitoEnEdicion = null;
}
function testEditarHito() {
    console.log("Probando editar hito con ID 1");
    editarHito(1);
}
// Funciones auxiliares FUERA de los event listeners
function generarFechas(fechaInicio, fechaFin) {
    const fechas = [];
    const inicio = new Date(fechaInicio);
    const fin = new Date(fechaFin);
    
    for (let d = new Date(inicio); d <= fin; d.setDate(d.getDate() + 1)) {
        fechas.push(new Date(d));
    }
    
    return fechas;
}

function formatearFecha(fecha) {
    const dia = fecha.getDate().toString().padStart(2, '0');
    const meses = ['ene', 'feb', 'mar', 'abr', 'may', 'jun', 
                  'jul', 'ago', 'sep', 'oct', 'nov', 'dic'];
    return `${dia}-${meses[fecha.getMonth()]}`;
}

function calcularPosicion(fechaInicio, fechaFin, fechaInicioProyecto, fechaFinProyecto) {
    const totalDias = (new Date(fechaFinProyecto) - new Date(fechaInicioProyecto)) / (1000 * 60 * 60 * 24);
    const diasDesdeInicio = (new Date(fechaInicio) - new Date(fechaInicioProyecto)) / (1000 * 60 * 60 * 24);
    const duracion = (new Date(fechaFin) - new Date(fechaInicio)) / (1000 * 60 * 60 * 24) + 1;
    
    const left = (diasDesdeInicio / totalDias) * 100;
    const width = (duracion / totalDias) * 100;
    
    return { left, width };
}

// Event listener para el formulario de crear hito
document.getElementById('hitoForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const proyecto = document.getElementById('proyecto').value;  
    const nombre = document.getElementById('nombreHito').value;
    const inicio = document.getElementById('fechaInicio').value;
    const fin = document.getElementById('fechaFin').value;
    const estado = document.getElementById('estadoHito').value;
    
    if (!proyecto || !nombre || !inicio || !fin) {
        alert('Por favor complete todos los campos');
        return;
    }
    
    if (new Date(inicio) > new Date(fin)) {
        alert('La fecha de inicio no puede ser posterior a la fecha de finalizaci√≥n');
        return;
    }
    
    // Agregar nuevo hito
    hitos.push({
        id: contadorHitos++,
        nombre,
        proyecto,
        inicio,
        fin,
        estado
    });
    
    hitos.sort((a, b) => new Date(a.inicio) - new Date(b.inicio));
    
    renderizarGantt();
    
    this.reset();
    
    alert('Hito agregado exitosamente');
});


// Event listener para el formulario de editar hito
document.getElementById('formEditarHito').addEventListener('submit', function(e) {
    e.preventDefault();
    
    if (!hitoEnEdicion) {
        alert('Error: No hay hito seleccionado para editar');
        return;
    }
    
    const nombre = document.getElementById('editNombreHito').value;
    const inicio = document.getElementById('editFechaInicio').value;
    const fin = document.getElementById('editFechaFin').value;
    const estado = document.getElementById('editEstadoHito').value;
    
    if (!nombre || !inicio || !fin) {
        alert('Por favor complete todos los campos');
        return;
    }
    
    if (new Date(inicio) > new Date(fin)) {
        alert('La fecha de inicio no puede ser posterior a la fecha de finalizaci√≥n');
        return;
    }
    
    const hitoIndex = hitos.findIndex(h => h.id === hitoEnEdicion);
    if (hitoIndex !== -1) {
        hitos[hitoIndex] = {
            ...hitos[hitoIndex],
            nombre,
            inicio,
            fin,
            estado
        };
        
        hitos.sort((a, b) => new Date(a.inicio) - new Date(b.inicio));
        
        renderizarGantt();
        
        cerrarModalEditarHito();
        
        alert('Hito actualizado exitosamente');
    } else {
        alert('Error al actualizar el hito');
    }
});

// Renderizar el Gantt inicial
renderizarGantt();

// Verificaci√≥n de elementos al cargar
document.addEventListener('DOMContentLoaded', function() {
    console.log("Modal editar hito:", document.getElementById('modal-editar-hito'));
    console.log("Form editar hito:", document.getElementById('formEditarHito'));
    console.log("Bot√≥n cerrar:", document.querySelector('#modal-editar-hito .close'));
    
    // Verificar que renderizarGantt funciona
    if (typeof renderizarGantt === 'function') {
        renderizarGantt();
    }
});
    </script>
   </body>
</html>
